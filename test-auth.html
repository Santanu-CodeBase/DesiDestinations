<!DOCTYPE html>
<html>
<head>
    <title>Auth Test</title>
</head>
<body>
    <h1>Authentication Test</h1>
    <div id="output"></div>
    
    <script>
        function log(message) {
            document.getElementById('output').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }
        
        // Clear any existing data
        Object.keys(localStorage).forEach(key => {
            if (key.startsWith('desiDestinations_user_')) {
                localStorage.removeItem(key);
                log('Removed: ' + key);
            }
        });
        
        // Test user creation
        const testUser = {
            name: 'Test User',
            email: 'test@example.com',
            password: 'test123',
            createdAt: new Date().toISOString()
        };
        
        localStorage.setItem('desiDestinations_user_test@example.com', JSON.stringify(testUser));
        log('Created test user: test@example.com with password: test123');
        
        // Test retrieval
        const retrieved = localStorage.getItem('desiDestinations_user_test@example.com');
        if (retrieved) {
            const userData = JSON.parse(retrieved);
            log('Retrieved user: ' + JSON.stringify(userData));
            log('Password match test123: ' + (userData.password === 'test123'));
        } else {
            log('Failed to retrieve user');
        }
        
        // List all keys
        const allKeys = Object.keys(localStorage).filter(key => key.startsWith('desiDestinations_user_'));
        log('All user keys: ' + JSON.stringify(allKeys));
    </script>
</body>
</html>